# 現在のデータベース構造分析

## 現在のテーブル一覧と評価

### 🟢 **必須テーブル（保持）**
| テーブル | 目的 | 実用性 | 最適化の必要性 |
|---------|------|--------|---------------|
| **companies** | 会社管理 | ✅ 高 | カラム簡素化 |
| **users** | ユーザー管理 | ✅ 高 | 1企業1アカウント最適化 |
| **vegetables** | 野菜品目管理 | ✅ 高 | ソフト削除追加 |
| **growing_tasks** | 計画タスク | ✅ 高 | カラム整理 |
| **work_reports** | 実績記録 | ✅ 高 | 統合フィールド |

### 🟡 **条件付きテーブル（簡素化）**
| テーブル | 目的 | 問題点 | 対策 |
|---------|------|--------|------|
| **vegetable_varieties** | 品種マスター | 過度に複雑 | シンプル化 |

### 🔴 **不要テーブル（削除候補）**
| テーブル | 理由 | 代替案 |
|---------|------|--------|
| **operation_logs** | work_reportsと重複 | work_reportsに統合 |
| **audit_logs** | 開発段階では過剰 | 将来実装 |
| **photos** | 複雑すぎる | 別途シンプル実装 |
| **notifications** | 通知システム未使用 | 削除 |
| **farm_areas** | 過度に詳細 | vegetablesのplot_nameで十分 |
| **farm_plots** | 同上 | 同上 |

## 実用的最適化方針

### **1企業1アカウントモデル最適化**
- usersテーブル：ロール権限廃止
- companies：シンプルな会社情報のみ
- 認証：メール+パスワードのみ

### **農業管理の本質に特化**
- 野菜品目登録
- 作業計画（タスク）
- 作業実績記録
- 削除・更新機能

### **パフォーマンス重視**
- 必要最小限のカラム
- 効率的なインデックス
- シンプルなRLS